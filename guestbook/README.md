{"patch": "*** Begin Patch\n*** Update File: docs/guestbook/README.md\n@@\n-# Guestbook (Livre dâ€™or)\n-\n-## AperÃ§u\n-- **Slug**Â : `guestbook`\n-- **Version**Â : 1.0\n-- **Description**Â : livre dâ€™or moderne avec modÃ©ration, rÃ©ponses admin et likes.\n-- **EntrÃ©es**Â : `GuestbookController#home` (`/guestbook`), `GuestbookAdminController#list` (`/admin/guestbook`)\n-- **DonnÃ©es**Â : entitÃ©s `GuestbookEntry`, `GuestbookManager` (JSON dans `DATA_PLUGIN/guestbook/`)\n-\n-## FonctionnalitÃ©s clÃ©s\n-- Soumission publique avec champs nom/email/message, option antispam (intÃ©gration possible), compteur de likes.\n-- Limitation par empreinte (`maxEntriesPerFingerprint`) et longueur (`maxMessageLength`).\n-- ModÃ©rationÂ : approbation, suppression, rÃ©ponses officielles (texte configurÃ© via `adminReplyName`).\n-- Panneau de configuration dÃ©diÃ© (`params`) pour ajuster les limites, lâ€™obligation dâ€™email, lâ€™onglet Â«Â messagesÂ Â» (titre+contenu).\n-- Templates diffÃ©renciÃ©s pour le front (`template/*.tpl`) et lâ€™admin (`template/admin-list.tpl`).\n-\n-## Configuration (param/config.json)\n-| ClÃ© | Description | DÃ©faut |\n-| --- | --- | --- |\n-| `priority` | Position | `2` |\n-| `requireModeration` | NÃ©cessite validation avant publication | `1` |\n-| `requireEmail` | Rend le champ email obligatoire | `0` |\n-| `maxMessageLength` | Longueur max des messages | `1000` |\n-| `maxEntriesPerFingerprint` | Limite par visiteur | `5` |\n-| `pageTitle` | Titre front | `Livre d'or` |\n-| `messagesTabTitle`, `messagesTabContent` | Bloc dâ€™aide dans lâ€™admin | `\"\"` |\n-| `adminReplyName` | Signature des rÃ©ponses | `RÃ©ponse de l'administrateur` |\n-\n-## Routes\n-| MÃ©thode | URI | Action |\n-| --- | --- | --- |\n-| GET | `/guestbook` | `GuestbookController#home` |\n-| POST | `/guestbook/add` | `GuestbookController#add` |\n-| GET | `/guestbook/like/[id]` | `GuestbookController#like` |\n-| GET | `/admin/guestbook` | `GuestbookAdminController#list` |\n-| GET | `/admin/guestbook/params` | `GuestbookAdminController#params` |\n-| POST | `/admin/guestbook/params/save` | `GuestbookAdminController#saveParams` |\n-| GET | `/admin/guestbook/approve/[id]/[token]` | `GuestbookAdminController#approve` |\n-| GET | `/admin/guestbook/delete/[id]/[token]` | `GuestbookAdminController#delete` |\n-| POST | `/admin/guestbook/reply/[id]/[token]` | `GuestbookAdminController#reply` |\n-| GET | `/admin/guestbook/delete-reply/[id]/[token]` | `GuestbookAdminController#deleteReply` |\n-\n-## SÃ©curitÃ© & conformitÃ©\n-- Les routes admin exigent un token utilisateur dans lâ€™URL et `isAuthorized()`.\n-- La soumission publique peut utiliser `antispam` et `VoteProtection` (selon config)Â : pensez Ã  activer HTTPS et Ã  limiter la taille POST (`post_max_size`).\n-- Les likes utilisent un simple GET â†’ prÃ©voir un jeton CSRF si vous ouvrez lâ€™URL Ã  dâ€™autres scripts.\n-- Stockage JSONÂ : sâ€™assurer que le dossier `DATA_PLUGIN/guestbook` nâ€™est pas exposÃ© publiquement.\n-\n-## Tests rapides\n-- Activer `requireModeration` et vÃ©rifier que les messages restent en attente.\n-- Tester la limite `maxEntriesPerFingerprint` en soumettant plus de 5 messages.\n-- Tenter une suppression avec un token invalide â†’ doit Ã©chouer.\n-\n-## RÃ©fÃ©rences\n-- `controllers/GuestbookController.php`, `GuestbookAdminController.php`\n-- `entities/GuestbookEntry.php`, `GuestbookManager.php`\n-- TemplatesÂ : `template/*.tpl`, `template/public.css`, `template/admin-list.tpl`\n+# âœï¸ Module Livre dâ€™or â€” Collectez des tÃ©moignages authentiques\n+\n+Donnez la parole Ã  vos visiteurs avec un livre dâ€™or moderne, modÃ©rÃ© et personnalisable. Le module Guestbook centralise les messages, vous laisse rÃ©pondre officiellement et met en avant les contributions les plus apprÃ©ciÃ©es.\n+\n+## ğŸŒŸ Ce que le module apporte\n+- ğŸ’Œ Formulaire public clair (nom, email optionnel, message, antispam).\n+- ğŸ§‘â€âš–ï¸ Workflow de modÃ©ration : approuver, refuser, supprimer en un clic.\n+- ğŸ’¬ RÃ©ponses officielles signÃ©es (champ `adminReplyName`).\n+- ğŸ‘ Bouton Â«â€¯Jâ€™aimeâ€¯Â» pour valoriser les tÃ©moignages.\n+- ğŸ“¥ Historique des messages/likes stockÃ© cÃ´tÃ© serveur (JSON).\n+\n+## âš™ï¸ Vous personnalisez\n+- Titre de page, obligation dâ€™email, longueur maximale des messages.\n+- Limite par empreinte (`maxEntriesPerFingerprint`) pour Ã©viter les abus.\n+- Bloc dâ€™aide dans lâ€™onglet admin (`messagesTabTitle`/`messagesTabContent`).\n+- Nom affichÃ© pour les rÃ©ponses officielles.\n+\n+## ğŸ”’ PensÃ© pour rester fiable\n+- IntÃ©gration native Antispam + `VoteProtection` pour limiter les doublons.\n+- Actions admin protÃ©gÃ©es par token et `isAuthorized()`.\n+- Stockage JSON hors webroot recommandÃ© + HTTPS obligatoire pour le token.\n+\n+## ğŸš€ IdÃ©al pour\n+- Portfolios, sites culturels, lieux touristiques.\n+- Associations qui collectent des retours dâ€™Ã©vÃ©nements.\n+- Toute installation 299Ko souhaitant mettre en avant ses tÃ©moignages clients.\n+\n+---\n+\n+## Guestbook â€” Documentation du module\n+\n+### 1. PrÃ©sentation\n+- **Slug**â€¯: `guestbook`\n+- **Version**â€¯: 1.0\n+- **EntrÃ©es**â€¯: `/guestbook`, `/admin/guestbook`\n+- **DonnÃ©es**â€¯: `GuestbookEntry`, `GuestbookManager` (`DATA_PLUGIN/guestbook/`)\n+\n+### 2. FonctionnalitÃ©s\n+- Soumission publique (nom, email, message, antispam optionnel) + like.\n+- Limitation par empreinte + message limit (`maxMessageLength`).\n+- Adminâ€¯: approbation, suppression, rÃ©ponses officielles, paramÃ¨tres globaux.\n+- Templates dÃ©diÃ©s front (`template/*.tpl`) et admin (`template/admin-list.tpl`).\n+\n+### 3. Configuration (`param/config.json`)\n+\n+| ClÃ© | Description | DÃ©faut |\n+| --- | --- | --- |\n+| `priority` | Position menu | `2` |\n+| `requireModeration` | Validation obligatoire | `1` |\n+| `requireEmail` | Email obligatoire | `0` |\n+| `maxMessageLength` | Longueur max | `1000` |\n+| `maxEntriesPerFingerprint` | Limite par visiteur | `5` |\n+| `pageTitle` | Titre front | `Livre d'or` |\n+| `messagesTabTitle`/`messagesTabContent` | Bloc aide admin | `\"\"` |\n+| `adminReplyName` | Signature des rÃ©ponses | `RÃ©ponse de l'administrateur` |\n+\n+### 4. Routes\n+\n+| MÃ©thode | URI | Action |\n+| --- | --- | --- |\n+| GET | `/guestbook` | `GuestbookController#home` |\n+| POST | `/guestbook/add` | `GuestbookController#add` |\n+| GET | `/guestbook/like/[id]` | `GuestbookController#like` |\n+| GET | `/admin/guestbook` | `GuestbookAdminController#list` |\n+| GET | `/admin/guestbook/params` | `GuestbookAdminController#params` |\n+| POST | `/admin/guestbook/params/save` | `GuestbookAdminController#saveParams` |\n+| GET | `/admin/guestbook/approve/[id]/[token]` | `GuestbookAdminController#approve` |\n+| GET | `/admin/guestbook/delete/[id]/[token]` | `GuestbookAdminController#delete` |\n+| POST | `/admin/guestbook/reply/[id]/[token]` | `GuestbookAdminController#reply` |\n+| GET | `/admin/guestbook/delete-reply/[id]/[token]` | `GuestbookAdminController#deleteReply` |\n+\n+### 5. SÃ©curitÃ©\n+- Jeton utilisateur obligatoire pour toute action admin.\n+- Soumission publique protÃ©gÃ©e par Antispam + honeypot (selon config).\n+- Likes via GETâ€¯: ajouter un token CSRF si exposÃ© publiquement.\n+- ProtÃ©ger `DATA_PLUGIN/guestbook` contre lâ€™accÃ¨s HTTP direct.\n+\n+### 6. Tests rapides\n+- Activer `requireModeration` â†’ vÃ©rifier quâ€™un message reste en attente.\n+- Soumettre plus de `maxEntriesPerFingerprint` â†’ refuser la 6áµ‰ entrÃ©e.\n+- Supprimer une entrÃ©e avec un token invalide â†’ action refusÃ©e.\n+\n+### 7. RÃ©fÃ©rences fichiers\n+- `controllers/GuestbookController.php`\n+- `controllers/GuestbookAdminController.php`\n+- `entities/GuestbookEntry.php`, `GuestbookManager.php`\n+- `template/*.tpl`, `template/public.css`, `template/admin-list.tpl`\n*** End Patch"}***

